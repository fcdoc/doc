---
brief: What Tags Do and How to Configure Tag Enhancements
---

# Configure Tag Enhancements

---

FlashDuty fault details display fault tags in the form of key:value, presenting various source data information for alerts. These tag details originate from various alert events connected to FlashDuty. **When the tags automatically generated by the system from source data fail to meet business needs, tag enhancements can be used to enrich alerts with additional tag information**, thereby improving fault handling efficiency.

## Tag Uses
---
In FlashDuty, tags are the fundamental data model for alert events and fault management. The uses of tags are extensive and include, but are not limited to:

- **Fault List:** The fault list now supports rapid filtering by tags, enabling users to集中 view and manage all fault records with identical tags, enhancing the efficiency and targeting of fault handling
- **Configure Routing:** When matching collaboration spaces according to routing rules, tags can be used as conditions to route events with the same tags to one or more collaboration spaces
- **Exclusion Rules:** When specific alerts do not need to be received, tags can be used for matching in exclusion rules
- **Dispatch Notifications:** Tags can be employed in dispatch conditions to achieve more precise and flexible notification distribution strategies
- **Alert Aggregation:** By intelligently using the same or different tags as dimensions during the aggregation process, effective classification and noise reduction of alert events can be achieved, improving the clarity and processing efficiency of faults
- **Silence Rules:** Tags can be included in silence condition configurations as a basis for judgment, accurately filtering and muting alerts associated with specific tags, thus achieving advanced customization of alert management and noise control
- **Suppression Rules:** By incorporating tags as key conditions, suppression rules can more accurately identify and prevent alerts that meet the conditions (including specific tag matches), optimizing alert system efficiency and reducing false positives
- **Tag Enhancement:** The tag enhancement feature allows for the automatic extraction or derivation of new tags from existing source tags during the configuration process, optimizing and refining the tag structure, and further enhancing the flexibility and intelligence of resource classification and management

## Configure Tag Enhancements
---

Each alert event in the integration center has an option for configuring tag enhancements, which can be set after creating the alert event
### Types of Tag Enhancement
- **Extraction:** Information required for additional tags can be extracted from the alert title, detailed description, and existing tag fields using regular expressions, and new tags can be automatically generated.
- **Combination:** Combination rules can construct new tags using Go language template syntax, extracting tag values in the format {{.Labels.Field}} or generating new tags with fixed values.
- **Mapping:** New key-value pairs can be generated from the system's source key values through mapping relationships. This requires预先 creating a schema [mapping relationship](https://developer.flashcat.cloud/api-142409927) and [uploading metadata](https://developer.flashcat.cloud/api-145679479) before configuration, with specific settings referred to in the configuration examples below.
- **Deletion:** Deleting a specified tag will be ineffective if the tag does not exist.

![](https://fcdoc.github.io/img/C3KhUjC60kncXxls61TDQEEruy0WQewZoicEf02fmks.avif)

### Configuration Instructions

- **Restriction Conditions:** When enhancing tags, you can configure prerequisite rules to restrict whether tags are generated or deleted (default is off). If there are restrictions, tags will not be generated or deleted if the conditions are not met. You can visit [Configure Filter Conditions](https://docs.flashcat.cloud/zh/flashduty/how-to-filter) to understand how to set up restriction conditions.
- **Overwrite:** When generating a new tag based on set conditions, you can choose whether to overwrite the original tag (default is off). For instance, if a new tag named "host" with the value "A" is generated according to the rules, and the tag "host" already exists in the original alert, it will overwrite the original tag.

- **Preview:** After completing the rule configuration, a preview is supported, allowing for a visual observation of the configuration effect.

![](https://fcdoc.github.io/img/YlGXF3qKrge-Zo66mUMwnDL5zeaWT7GLg-2SXJRoekA.avif)

> [!NOTE]
> When multiple tag rules are configured, they will be executed in top-to-bottom order. If a rule does not match, the corresponding tag will not be generated/deleted, and no prompt message will be displayed.

## Configuration Example
---
### 1. **Tag Extraction**
**Scenario:** Alerts from email integration require key information to be extracted from the description as tags for application in other scenarios, such as extracting IP addresses and trigger values from the description into separate tags.
#### 1.1 Original Alert Text

<img src="https://fcdoc.github.io/img/Rb27ZLASfgZmpdWolbpWjks_kXixho4PPNWCFKQsplk.avif" style="display: block; margin: 0 auto;" width="500">

#### 1.2 Extraction Rules

<img src="https://fcdoc.github.io/img/AhCk-nFOBQrsrpMVOSfrX9IfHm9MBNjDCA0djxuWKa4.avif" style="display: block; margin: 0 auto;"  width="500">

#### 1.3 Extraction Effect
<img src="https://fcdoc.github.io/img/uZkBXgpld3Ng5wCstL8exfe4C0kvYx_lu564VLcBfpk.avif" style="display: block; margin: 0 auto;" width="500">



### 2. **Tag Combination**
**Scenario:** The company's log platform can access log details directly using a domain name + Event ID + timestamp, but the alert information only contains Event ID and timestamp tags, so it needs to be combined into an access address based on this information.
#### 2.1 Original Alert Text
<img src="https://fcdoc.github.io/img/-AL6h9QgiwkE2AsfYeBfTbF94zi5HqCzjLoAqfZD_i4.avif" style="display: block; margin: 0 auto;" width="500">

#### 2.2 Combination Rules

<img src="https://fcdoc.github.io/img/O62n1CJ2Qp0j7Xf2zboj1K5NfOcaawF_fO_arncUQhg.avif" style="display: block; margin: 0 auto;" width="500">

#### 2.3 Combination Effect

<img src="https://fcdoc.github.io/img/-4qbdrhz0uEY1G83zBTJgRXeubIXeQ-iaLFhZCtpc5Q.avif" style="display: block; margin: 0 auto;" width="500">

### 3. **Tag Mapping**
**Scenario:** When the tag values in source alert information are not fixed and their meanings are not intuitively clear, mapping can be used to create new defined tags and values; for example, when the source alert only contains resource type ID information, but you want to reflect the corresponding resource type names, this can be achieved through mapping.

#### 3.1 Create Schema Mapping Relationship
Source alert information contains only resource type ID and numeric alert levels, and the required mapping tags are: ID->Type, Level->DLevel.

| Source Tag 01 | Target Tag 01 | Source Tag 02 | Target Tag 02|
| :---: | :---: | :---: | :---: |
| ID | Type | Level |Dlevel|

Create a schema where source_labels and result_labels parameters represent the source and target tag names, respectively ([more creation methods](https://developer.flashcat.cloud/api-142409927))


```
curl --location --request POST 'https://api.flashcat.cloud/enrichment/mapping/schema/create?app_key={}' \
--header 'User-Agent: Apifox/1.0.0 (https://apifox.com)' \
--header 'Content-Type: application/json' \
--data-raw '{
"schema_name": "zabbix mapping",
"description": "Mapping test",
"source_labels": [
"ID",
"Level"
],
"result_labels": [
"Type",
"Dlevel"
]
}'

```


#### 3.2 Upload Mapping Table (CSV format required)

| ID | Type | Level |Dlevel|
| :---: | :---: | :---: | :---: |
| A | server | 1 |Service Suspension|
| B | router | 2 |Danger|
| C | gateway | 3 |warn|
| D | database | 4 |Notice|
| E | MQ | 5 |remind|

```
curl --location --request POST 'https://api.flashcat.cloud/enrichment/mapping/data/upload?schema_id={}&app_key={}' \
--header 'User-Agent: Apifox/1.0.0 (https://apifox.com)' \
--header 'Content-Type: multipart/form-data' \
--form 'file=@"./test.csv"'

```


#### 3.3 Configure Mapping Relationship

<img src="https://fcdoc.github.io/img/0yGvcoNhFa8b42HZsdo1DdoPWtNRO5U9SrVN0Dmaq_U.avif" style="display: block; margin: 0 auto;"  width="500">

##### 3.3.1 Original Alert Text

<img src="https://fcdoc.github.io/img/ozOHAnGimcC2mkLn3fOyNnJ9w6aJH-hcL4yvuhv3Jrs.avif" style="display: block; margin: 0 auto;" width="500">

##### 3.3.2 Mapping Effect

<img src="https://fcdoc.github.io/img/R97ivADiQK8AcLgF-KHsoc88JjPPW2aQR_GlZCQS-Yk.avif" style="display: block; margin: 0 auto;" width="500">

> [!NOTE]
> If you do not want the source tag to still exist, you can achieve this through a deletion rule.