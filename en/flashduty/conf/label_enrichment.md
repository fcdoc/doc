---
brief: What Tags Do and How to Configure Tag Enhancements
---

# Configure Tag Enhancements

In the FlashDuty incident details, incident tags are displayed in the form of key:value, presenting various source data information from alerts. These tags originate from various alert events connected to FlashDuty. **When the tags automatically generated by the system based on source data do not meet business needs, you can use tag enhancements to enrich alert tags, thereby improving incident handling efficiency.**

## Purpose of Tags
In FlashDuty, tags are the fundamental data model for alert events and incident handling. Tags have a wide range of uses, including but not limited to:

- **Incident List:** The incident list supports quick filtering by tags, allowing users to centrally view and manage all incident records with the same tags, thus improving the efficiency and relevance of incident handling
- **Configure Routing:** When matching collaboration spaces according to routing rules, you can use tags as conditions to route events with the same tags to one or more collaboration spaces
- **Exclusion Rules:** When specific alerts do not need to be received, you can match them based on tags in the exclusion rules
- **Dispatch Notifications:** Tags can be used in dispatch conditions to achieve more precise and flexible notification distribution strategies
- **Alert Aggregation:** By intelligently using the same or different tags as dimensions in the aggregation process, you can effectively classify and reduce noise in alert events, improving the clarity and handling efficiency of incidents
- **Silence Rules:** You can include tags in the silence condition configuration as a basis for judgment, accurately filtering and silencing alerts associated with specific tags, thereby achieving advanced customization and noise control in alert management
- **Suppression Rules:** By introducing tags as key conditions, suppression rules can more accurately identify and block alerts that meet specific conditions (including specific tag matches), optimizing alert system efficiency and reducing false positives
- **Tag Enhancements:** The tag enhancement function allows you to automatically extract or derive new tags from existing source tags during the configuration process, optimizing and refining the tag structure, and further enhancing the flexibility and intelligence of resource classification and management

## Configure Tag Enhancements

Each alert event in the integration center has tag enhancement configuration options, which can be configured after the alert event is created
### Types of Tag Enhancements
- **Extraction:** You can use regular expressions to extract the required information from the alert title, detailed description, and existing tag fields, and automatically generate additional tags.
- **Combination:** Combination rules can construct new tags using Go language template syntax, extracting tag values in the format {{.Labels.Field}} or generating new tags using fixed values.
- **Mapping:** This involves generating new key-value pairs by mapping the source key values in the system. You need to [create a schema](https://developer.flashcat.cloud/api-142409927) for the mapping relationship and [upload metadata](https://developer.flashcat.cloud/api-145679479) before configuration. For specific configuration, refer to the examples below.
- **Deletion:** Delete the tag with the specified name. If the tag does not exist, the operation is invalid.

![](https://fcdoc.github.io/img/zh/flashduty/conf/label_enrichment/1.avif)

### Configuration Instructions

- **Restrictions:** When performing tag enhancements, you can configure prerequisite rules to restrict whether the corresponding tags are generated or deleted (off by default). When restrictions are in place, if the conditions are not met, the tags will not be generated or deleted. You can refer to [Configure Filter Conditions](/conf/how_to_filter) to learn how to set up restrictions.
- **Overwrite:** When generating a new tag based on set conditions, you can choose whether to overwrite the original tag (off by default). For example, a new tag named host with a value of A is generated according to the rules. If the tag host already exists in the original alert , it will be overwritten. Original label.

- **Preview:** After configuring the rules, you can preview the results to visually observe the effect of the rule configuration.

![](https://fcdoc.github.io/img/zh/flashduty/conf/label_enrichment/2.avif)

> [!NOTE]
> Multiple tag rules can be configured. If there are multiple rules, they will be executed in order from top to bottom. When any of the rules does not match, the corresponding tag will not be generated/deleted, and there will be no prompt message.

## Configuration Examples
### 1. **Tag Extraction**
**Scenario:** The alert event comes from email integration, and you need to extract key information from the description to apply as tags in other scenarios, such as extracting the IP and trigger value from the description as independent tags.
#### 1.1 Alert Original Text

<img src="https://fcdoc.github.io/img/zh/flashduty/conf/label_enrichment/3.avif" style="display: block; margin: 0 auto;" width="500">

#### 1.2 Extraction Rules

<img src="https://fcdoc.github.io/img/zh/flashduty/conf/label_enrichment/4.avif" style="display: block; margin: 0 auto;"  width="500">

#### 1.3 Extraction Effect
<img src="https://fcdoc.github.io/img/zh/flashduty/conf/label_enrichment/5.avif" style="display: block; margin: 0 auto;" width="500">

### 2. **Tag Combination**
**Scenario:** The company's log platform can directly access log details through a combination of domain name, event ID, and timestamp. However, the alert information only contains event ID and timestamp tags. You need to combine this information to form an access URL.
#### 2.1 Alert Original Text
<img src="https://fcdoc.github.io/img/zh/flashduty/conf/label_enrichment/6.avif" style="display: block; margin: 0 auto;" width="500">

#### 2.2 Combination Rules

<img src="https://fcdoc.github.io/img/zh/flashduty/conf/label_enrichment/7.avif" style="display: block; margin: 0 auto;" width="500">

#### 2.3 Combination Effect

<img src="https://fcdoc.github.io/img/zh/flashduty/conf/label_enrichment/8.avif" style="display: block; margin: 0 auto;" width="500">

### 3. **Tag Mapping**
**Scenario:** When the tag values in the source alert information are not fixed and their meanings are not intuitively clear, you can map the source tags to new defined tags and values. For example, if the source alert only contains resource type ID information, you may want to map each ID to the corresponding resource type name, which can be achieved through mapping.

#### 3.1 Create Schema Mapping Relationship
The source alert information only contains the resource type ID and the alert level represented by numbers. The required mapping tags are: ID->Type , Level->DLevel .

| Source Tag 01 | Target Tag 01 | Source Tag 02 | Target Tag 02|
| :---: | :---: | :---: | :---: |
| ID | Type | Level |Dlevel|

Create schema source_labels and result_labels parameters represent the source tag and target tag names respectively ( [more creation methods](https://developer.flashcat.cloud/api-142409927) )

```
curl --location --request POST 'https://api.flashcat.cloud/enrichment/mapping/schema/create?app_key={}' \
--header 'User-Agent: Apifox/1.0.0 (https://apifox.com)' \
--header 'Content-Type: application/json' \
--data-raw '{
"schema_name": "zabbix mapping",
"description": "Mapping test",
"source_labels": [
"ID",
"Level"
],
"result_labels": [
"Type",
"Dlevel"
]
}'

```

#### 3.2 Upload Mapping Table (Requires CSV Format)

| ID | Type | Level |Dlevel|
| :---: | :---: | :---: | :---: |
| A | server | 1 |Stop Service|
| B | router | 2 |Danger|
| C | gateway | 3 |Warning|
| D | database | 4 |Notice|
| E | MQ | 5 |Information|

```
curl --location --request POST 'https://api.flashcat.cloud/enrichment/mapping/data/upload?schema_id={}&app_key={}' \
--header 'User-Agent: Apifox/1.0.0 (https://apifox.com)' \
--header 'Content-Type: multipart/form-data' \
--form 'file=@"./test.csv"'

```

#### 3.3 Configure Mapping Relationship

<img src="https://fcdoc.github.io/img/zh/flashduty/conf/label_enrichment/9.avif" style="display: block; margin: 0 auto;"  width="500">

##### 3.3.1 Alert Original Text

<img src="https://fcdoc.github.io/img/zh/flashduty/conf/label_enrichment/10.avif" style="display: block; margin: 0 auto;" width="500">

##### 3.3.2 Mapping Effect

<img src="https://fcdoc.github.io/img/zh/flashduty/conf/label_enrichment/11.avif" style="display: block; margin: 0 auto;" width="500">

> [!NOTE]
> If you do not want the source tag to remain, you can use the deletion rule to remove it.